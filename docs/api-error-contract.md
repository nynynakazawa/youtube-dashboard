# API Error Contract

## Response Envelope
```json
{
  "error": {
    "code": 400,
    "message": "チャンネルURLまたはIDを入力してください。",
    "details": null
  }
}
```
- `code`: HTTP ステータスと同じ数値を必ず設定。
- `message`: フロントがトースト表示に使用する日本語メッセージ。
- `details`: 任意。開発時のみ追加情報を入れたい場合に使用（未使用時は `null`）。

## ステータス別の message 例
| status | message |
| --- | --- |
| 400 | 入力内容が正しくありません。チャンネルURLまたはIDを確認してください。 |
| 404 | チャンネルが見つかりませんでした。 |
| 429 | 短時間に更新しすぎです。しばらくしてからお試しください。 |
| 500 | サーバーで問題が発生しました。時間をおいて再度お試しください。 |

## フロント側ハンドリング
1. `code` を見て再試行可否などを制御。
2. `message` をそのままトースト表示。
3. `details` は開発時ログみに表示し、プロダクションではユーザーに見せない。

## バックエンド実装メモ
- Lambda 側では例外捕捉時に統一フォーマッタで JSON を構築。
- API Gateway のエラーマッピングで同形式が返るよう設定。
- 将来的に i18n が必要になっても `message` だけ差し替えればよい。
